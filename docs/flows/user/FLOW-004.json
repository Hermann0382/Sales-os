{
  "id": "FLOW-004",
  "name": "Execute M3 Outcome Vision",
  "description": "Sales agent captures the prospect's desired future state and understands what 'working' looks like for them, without hype or fantasy language.",
  "feature_id": "FR-002",
  "story_ids": ["ST-005"],
  "actor": "user",
  "trigger": "M2 completed, agent proceeds to M3",
  "steps": [
    {
      "id": "STEP-001",
      "sequence": 1,
      "action": "System displays M3 milestone panel with objective",
      "actor": "system",
      "inputs": ["call_session_id", "milestone_id"],
      "outputs": ["milestone_ui_rendered"],
      "conditions": [],
      "next_steps": ["STEP-002"]
    },
    {
      "id": "STEP-002",
      "sequence": 2,
      "action": "Capture desired outcome (text field)",
      "actor": "user",
      "inputs": ["desired_outcome_text"],
      "outputs": ["desired_outcome_recorded"],
      "conditions": [],
      "next_steps": ["STEP-003"]
    },
    {
      "id": "STEP-003",
      "sequence": 3,
      "action": "Capture 12-month vision",
      "actor": "user",
      "inputs": ["twelve_month_vision"],
      "outputs": ["vision_recorded"],
      "conditions": [],
      "next_steps": ["STEP-004"]
    },
    {
      "id": "STEP-004",
      "sequence": 4,
      "action": "Capture cost of inaction (text field)",
      "actor": "user",
      "inputs": ["cost_of_inaction_text"],
      "outputs": ["cost_of_inaction_recorded"],
      "conditions": [],
      "next_steps": ["STEP-005"]
    },
    {
      "id": "STEP-005",
      "sequence": 5,
      "action": "System provides guidance to avoid hype/fantasy language",
      "actor": "system",
      "inputs": [],
      "outputs": ["language_guidance_displayed"],
      "conditions": [],
      "next_steps": ["STEP-006"]
    },
    {
      "id": "STEP-006",
      "sequence": 6,
      "action": "Agent adds notes if needed",
      "actor": "user",
      "inputs": ["milestone_notes"],
      "outputs": ["notes_saved"],
      "conditions": [],
      "next_steps": ["STEP-007"]
    },
    {
      "id": "STEP-007",
      "sequence": 7,
      "action": "System validates required fields",
      "actor": "system",
      "inputs": ["desired_outcome", "cost_of_inaction"],
      "outputs": ["milestone_validation_result"],
      "conditions": [
        {
          "condition": "required_fields_incomplete",
          "outcome": "block_or_warn_based_on_mode"
        }
      ],
      "next_steps": ["STEP-008"]
    },
    {
      "id": "STEP-008",
      "sequence": 8,
      "action": "Agent marks M3 complete and proceeds to M4",
      "actor": "user",
      "inputs": [],
      "outputs": ["milestone_status_complete", "next_milestone_activated"],
      "conditions": [],
      "next_steps": []
    }
  ],
  "success_criteria": [
    "Desired outcome captured in text",
    "12-month vision documented",
    "Cost of inaction articulated",
    "No hype or fantasy language used",
    "M3 marked complete"
  ],
  "error_handling": [
    {
      "error": "Prospect unable to articulate vision",
      "response": "Agent uses prompting questions, captures as much as possible"
    },
    {
      "error": "Objection raised",
      "response": "Trigger objection subflow, return to M3 after resolution"
    }
  ]
}
