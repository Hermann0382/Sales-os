{
  "id": "FLOW-018",
  "name": "Review Team Performance Dashboard",
  "description": "Manager reviews call analytics, agent metrics, and performance patterns across the team.",
  "feature_id": "FR-014",
  "story_ids": ["ST-032"],
  "actor": "user",
  "trigger": "Manager navigates to dashboard from main menu",
  "steps": [
    {
      "id": "STEP-001",
      "sequence": 1,
      "action": "Manager navigates to Performance Dashboard",
      "actor": "user",
      "inputs": [],
      "outputs": ["dashboard_view_loaded"],
      "conditions": [],
      "next_steps": ["STEP-002"]
    },
    {
      "id": "STEP-002",
      "sequence": 2,
      "action": "System verifies manager role access",
      "actor": "system",
      "inputs": ["user_role"],
      "outputs": ["access_granted"],
      "conditions": [
        {
          "condition": "role != manager AND role != admin",
          "outcome": "access_denied"
        }
      ],
      "next_steps": ["STEP-003"]
    },
    {
      "id": "STEP-003",
      "sequence": 3,
      "action": "System renders dashboard with default date range",
      "actor": "system",
      "inputs": ["team_id", "default_date_range"],
      "outputs": ["dashboard_rendered"],
      "conditions": [],
      "next_steps": ["STEP-004"]
    },
    {
      "id": "STEP-004",
      "sequence": 4,
      "action": "View calls per agent metrics",
      "actor": "user",
      "inputs": [],
      "outputs": ["calls_per_agent_displayed"],
      "conditions": [],
      "next_steps": ["STEP-005"]
    },
    {
      "id": "STEP-005",
      "sequence": 5,
      "action": "View objection frequency by type",
      "actor": "user",
      "inputs": [],
      "outputs": ["objection_frequency_displayed"],
      "conditions": [],
      "next_steps": ["STEP-006"]
    },
    {
      "id": "STEP-006",
      "sequence": 6,
      "action": "View close rate by qualification status",
      "actor": "user",
      "inputs": [],
      "outputs": ["close_rate_displayed"],
      "conditions": [],
      "next_steps": ["STEP-007"]
    },
    {
      "id": "STEP-007",
      "sequence": 7,
      "action": "View time spent per milestone averages",
      "actor": "user",
      "inputs": [],
      "outputs": ["milestone_time_displayed"],
      "conditions": [],
      "next_steps": ["STEP-008"]
    },
    {
      "id": "STEP-008",
      "sequence": 8,
      "action": "View AI risk flags summary",
      "actor": "user",
      "inputs": [],
      "outputs": ["risk_flags_summary_displayed"],
      "conditions": [],
      "next_steps": ["STEP-009"]
    },
    {
      "id": "STEP-009",
      "sequence": 9,
      "action": "View slide effectiveness scores",
      "actor": "user",
      "inputs": [],
      "outputs": ["slide_effectiveness_displayed"],
      "conditions": [],
      "next_steps": ["STEP-010"]
    },
    {
      "id": "STEP-010",
      "sequence": 10,
      "action": "Access ROI tool integration for projected vs actual comparison",
      "actor": "user",
      "inputs": [],
      "outputs": ["roi_comparison_displayed"],
      "conditions": [],
      "next_steps": ["STEP-011"]
    },
    {
      "id": "STEP-011",
      "sequence": 11,
      "action": "Apply date range and agent filters",
      "actor": "user",
      "inputs": ["date_range", "agent_filter"],
      "outputs": ["filtered_metrics_displayed"],
      "conditions": [],
      "next_steps": ["STEP-012"]
    },
    {
      "id": "STEP-012",
      "sequence": 12,
      "action": "Drill down into specific agent or call",
      "actor": "user",
      "inputs": ["drill_down_selection"],
      "outputs": ["detail_view_loaded"],
      "conditions": [],
      "next_steps": ["STEP-013"]
    },
    {
      "id": "STEP-013",
      "sequence": 13,
      "action": "Export metrics report if needed",
      "actor": "user",
      "inputs": ["export_format"],
      "outputs": ["report_exported"],
      "conditions": [],
      "next_steps": []
    }
  ],
  "success_criteria": [
    "Dashboard loads with all metric widgets",
    "Calls per agent accurately displayed",
    "Objection frequency breakdown visible",
    "Close rate by qualification shown",
    "Milestone time averages calculated",
    "AI risk flags summarized",
    "Slide effectiveness scores available",
    "ROI projected vs actual comparison functional",
    "Filters and drill-down working"
  ],
  "error_handling": [
    {
      "error": "Access denied for non-manager role",
      "response": "Display access denied message, redirect to appropriate view"
    },
    {
      "error": "Metrics calculation timeout",
      "response": "Show partial data with loading indicator for remaining"
    }
  ]
}
